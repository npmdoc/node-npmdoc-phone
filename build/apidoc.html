<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/aftership/phone#readme"

    >phone (v1.0.9)</a>
</h1>
<h4>With a given country and phone number, validate and format the phone number to E.164 standard</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.phone">module phone</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phone.phone">
            function <span class="apidocSignatureSpan"></span>phone
            <span class="apidocSignatureSpan">(phone, country)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phone" id="apidoc.module.phone">module phone</a></h1>


    <h2>
        <a href="#apidoc.element.phone.phone" id="apidoc.element.phone.phone">
        function <span class="apidocSignatureSpan"></span>phone
        <span class="apidocSignatureSpan">(phone, country)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">phone = function (phone, country) {
	var result = [];

	phone = (phone === null || typeof(phone) !== &#x27;string&#x27;) ? &#x27;&#x27; : phone.trim();
	country = (country === null || typeof(country) !== &#x27;string&#x27;) ? &#x27;&#x27; : country.trim();

	var plus_sign = false;

	if (phone.match(/^\+/)) {
		plus_sign = true;
	}

	// remove any non-digit character, included the +
	phone = phone.replace(/\D/g, &#x27;&#x27;);

	var iso3166 = getISO3166(country); // if no country, default is USA


	if (Object.keys(iso3166).length === 0) {
		return result;
	}

	if (country) {
		// remove leading 0s for all countries except &#x27;GAB&#x27;, &#x27;CIV&#x27;, &#x27;COG&#x27;
		if ([&#x27;GAB&#x27;, &#x27;CIV&#x27;, &#x27;COG&#x27;].indexOf(iso3166.alpha3) === -1) {
			phone = phone.replace(/^0+/, &#x27;&#x27;);
		}

		// if input 89234567890, RUS, remove the 8
		if (iso3166.alpha3 === &#x27;RUS&#x27; &#x26;&#x26; phone.length === 11 &#x26;&#x26; phone.match(/^89/) !== null) {
			phone = phone.replace(/^8+/, &#x27;&#x27;);
		}


		if (plus_sign) {
			// D is here.
		} else {
			// C: have country, no plus sign ---&#x3e;
			//	case 1
			//		check phone_number_length == phone.length
			//		add back the country code
			//	case 2
			//		phone_number_length+phone_country_code.length == phone.length
			//		then go to D
			if (iso3166.phone_number_lengths.indexOf(phone.length) !== -1) {
				phone = iso3166.country_code + phone;
			}
		}
	} else {
		if (plus_sign) {
			// A: no country, have plus sign --&#x3e; lookup country_code, length, and get the iso3166 directly
			// also validation is done here. so, the iso3166 is the matched result.
			iso3166 = get_iso3166_by_phone(phone);
		} else {
			// B: no country, no plus sign --&#x3e; treat it as USA
			// 1. check length if == 11, or 10, if 10, add +1, then go go D
			// no plus sign, no country is given. then it must be USA
			// iso3166 = iso3166_data[0]; already assign by the default value
			if (iso3166.phone_number_lengths.indexOf(phone.length) !== -1) {
				phone = &#x27;1&#x27; + phone;
			}
		}
	}

	if (validate_phone_iso3166(phone, iso3166)) {
		return [&#x27;+&#x27; + phone, iso3166.alpha3];
	}
	return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
